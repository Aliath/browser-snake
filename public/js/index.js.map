{"version":3,"file":"index.js","sources":["../../src/lib/EventEmitter.ts","../../src/lib/KeyboardManager.ts","../../src/index.ts"],"sourcesContent":["type Handler = (payload?: any) => any;\r\nconst _handlers: Record<string, Handler[]> = {};\r\n\r\nclass EventEmitter {\r\n    on(eventName: string, handler: Handler) {\r\n        const currentHandlers = _handlers[eventName];\r\n        const newHandlers = currentHandlers ? [...currentHandlers, handler] : [handler];\r\n\r\n        _handlers[eventName] = newHandlers;\r\n    }\r\n\r\n    off(eventName: string, handler: Handler) {\r\n        _handlers[eventName] = _handlers[eventName].filter(item => item !== handler);\r\n    }\r\n\r\n    emit(eventName: string, payload: any) {\r\n        const handlers = _handlers[eventName];\r\n        if (!handlers) return;\r\n        \r\n        handlers.forEach(handler => handler(payload));\r\n    }\r\n}\r\n\r\nexport default new EventEmitter();","import EventEmitter from './EventEmitter';\r\n\r\nconst DEFINED_DIRECTIONS = {\r\n    'UP': ['KeyW', 'ArrowUp'],\r\n    'DOWN': ['KeyS', 'ArrowDown'],\r\n    'LEFT': ['KeyD', 'ArrowLeft'],\r\n    'RIGHT': ['KeyA', 'ArrowRight'],\r\n};\r\nconst listenedKeys = Object.values(DEFINED_DIRECTIONS).reduce((a, b) => [...a, ...b]);\r\n\r\nexport class KeyboardManager {\r\n    constructor() {\r\n        this.bindKeyboardEvents();\r\n    }\r\n\r\n    private bindKeyboardEvents(): void {\r\n        window.addEventListener('keydown', (event) => {\r\n            if (!listenedKeys.includes(event.code)) return;\r\n\r\n            const [direction] = Object.entries(DEFINED_DIRECTIONS).find(([, values]) => {\r\n                return values.includes(event.code);\r\n            });\r\n\r\n            EventEmitter.emit('changeGameDirection', direction);\r\n        }, false);\r\n    }\r\n}","import { KeyboardManager } from './lib/KeyboardManager';\r\n\r\nconst km = new KeyboardManager();"],"names":["EventEmitter"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;IACA,IAAM,SAAS,GAA8B,EAAE,CAAC;IAEhD;QAAA;SAkBC;QAjBG,yBAAE,GAAF,UAAG,SAAiB,EAAE,OAAgB;YAClC,IAAM,eAAe,GAAG,SAAS,CAAC,SAAS,CAAC,CAAC;YAC7C,IAAM,WAAW,GAAG,eAAe,kBAAO,eAAe,GAAE,OAAO,KAAI,CAAC,OAAO,CAAC,CAAC;YAEhF,SAAS,CAAC,SAAS,CAAC,GAAG,WAAW,CAAC;SACtC;QAED,0BAAG,GAAH,UAAI,SAAiB,EAAE,OAAgB;YACnC,SAAS,CAAC,SAAS,CAAC,GAAG,SAAS,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,KAAK,OAAO,GAAA,CAAC,CAAC;SAChF;QAED,2BAAI,GAAJ,UAAK,SAAiB,EAAE,OAAY;YAChC,IAAM,QAAQ,GAAG,SAAS,CAAC,SAAS,CAAC,CAAC;YACtC,IAAI,CAAC,QAAQ;gBAAE,OAAO;YAEtB,QAAQ,CAAC,OAAO,CAAC,UAAA,OAAO,IAAI,OAAA,OAAO,CAAC,OAAO,CAAC,GAAA,CAAC,CAAC;SACjD;QACL,mBAAC;IAAD,CAAC,IAAA;AAED,yBAAe,IAAI,YAAY,EAAE;;ICrBjC,IAAM,kBAAkB,GAAG;QACvB,IAAI,EAAE,CAAC,MAAM,EAAE,SAAS,CAAC;QACzB,MAAM,EAAE,CAAC,MAAM,EAAE,WAAW,CAAC;QAC7B,MAAM,EAAE,CAAC,MAAM,EAAE,WAAW,CAAC;QAC7B,OAAO,EAAE,CAAC,MAAM,EAAE,YAAY,CAAC;KAClC,CAAC;IACF,IAAM,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC,kBAAkB,CAAC,CAAC,MAAM,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,sBAAI,CAAC,EAAK,CAAC,IAAC,CAAC,CAAC;IAEtF;QACI;YACI,IAAI,CAAC,kBAAkB,EAAE,CAAC;SAC7B;QAEO,4CAAkB,GAA1B;YACI,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAC,KAAK;gBACrC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC;oBAAE,OAAO;gBAExC,IAAA,SAAS,GAAI,MAAM,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,UAAC,EAAU;wBAAP,MAAM,QAAA;oBAClE,OAAO,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;iBACtC,CAAC,GAFc,CAEb;gBAEHA,cAAY,CAAC,IAAI,CAAC,qBAAqB,EAAE,SAAS,CAAC,CAAC;aACvD,EAAE,KAAK,CAAC,CAAC;SACb;QACL,sBAAC;IAAD,CAAC;;ICxBD,IAAM,EAAE,GAAG,IAAI,eAAe,EAAE;;;;"}